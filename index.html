<!DOCTYPE html>
<html>
  <head>
  <title> OPEN SOURCE MECHANICS </title>
  <link rel="stylesheet" href="estilos.css" />
  </head>
<body>
<div id="container">
<header>
<h1> Open Source Mechanics </h1>
</header>
  <nav>
    <ul>
    <li> Main </li>
    <li> Contact </li>
    <li> About </li>
    </ul>
  </nav>
  <div class="clear"></div>
  <section id="contenido" >
    <article class="article">
      <h2> Title </h2>
      <p> Text</p>
    </article>
  </section>
    <article class="article">
      <h2> Title </h2>
      <p> - 20231020 -  Ok. We're online.
      </p>
    </article>
  <aside>
  <h1> Search </h1>
  <form>
    <input type="text"/>
    <input type="submit" value="search">
  </form>
  </aside>
</div>

<! --
From https://hibbard.eu/how-to-make-a-simple-visitor-counter-using-php/
and
-->

<?php
session_start();
$counter_name = "counter.txt";

// Check if a text file exists.
// If not create one and initialize it to zero.
if (!file_exists($counter_name)) {
  $f = fopen($counter_name, "w");
  fwrite($f,"0");
  fclose($f);
}

// Read the current value of our counter file
$f = fopen($counter_name,"r");
$counterVal = fread($f, filesize($counter_name));
fclose($f);

// Has visitor been counted in this session?
// If not, increase counter value by one
if(!isset($_SESSION['hasVisited'])){
  $_SESSION['hasVisited']="yes";
  $counterVal++;
  $f = fopen($counter_name, "w");
  fwrite($f, $counterVal);
  fclose($f);
}

echo "You are visitor number $counterVal to this site";
?>

</body>
</html>
